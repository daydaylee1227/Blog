## æ€»ç»“

ä¸»è¦æ€»ç»“Vue-daymusicé¡¹ç›®ç”¨åˆ°çš„çŸ¥è¯†ç‚¹



## day1-é¡µé¢éª¨æ¶çš„å¼€å‘

### å°å°æ€»ç»“ï¼š

webpacké…ç½®åˆ«å:

1. è¿›å…¥webpack.base.cong.jsæ–‡ä»¶

2. resolveä¸­aliaså±æ€§æ·»åŠ åˆ«å

   ```
   alias: {
         '@': resolve('src'),
         'common': resolve('src/common'),
         'components': resolve('src/components'),
         'base': resolve('src/base'),
         'api': resolve('src/api')
       }
   
   function resolve(dir) {
     return path.join(__dirname, '..', dir)
   } 
   ```

**vue stylus ä¸­ä½¿ç”¨@import å¼•å…¥è·¯å¾„é—®é¢˜**

```
<style  lang="stylus">     
//ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯ä»¥æ­£ç¡®å¯¼å…¥ 
@import '../assets/css/index.styl';     
//ä½¿ç”¨ @è·¯å¾„å¼•å…¥ æŠ¥é”™     
@import '@/assets/css/index.styl'; </style>
```

è§£å†³æ–¹æ¡ˆ

```
 @import '~@/assets /css/index.styl'
```

åŸç†ï¼šCSS loader ä¼šæŠŠæŠŠéæ ¹è·¯å¾„çš„urlè§£é‡Šä¸ºç›¸å¯¹è·¯å¾„ï¼Œ åŠ ~å‰ç¼€æ‰ä¼šè§£é‡Šæˆæ¨¡å—è·¯å¾„ã€‚

**ç»„ä»¶æ³¨å†Œä½¿ç”¨**

éœ€è¦æ³¨æ„çš„å°±æ˜¯ç»„ä»¶çš„é©¼å³°å‘½åï¼ŒMHeader â€“>> m-header

```
ç¬¬ä¸€æ­¥
import MHeader from 'components/m-header/m-header'
ç¬¬äºŒæ­¥
export default {
  components: {
    MHeader,
    Tab
  }
}
ç¬¬ä¸‰æ­¥
<m-header></m-header>
```

**router-link** å£°æ˜å¼

tagå±æ€§è¡¨ç¤ºæ¸²æŸ“æˆä»€ä¹ˆæ ‡ç­¾ï¼Œé»˜è®¤æ˜¯aæ ‡ç­¾

toè¡¨ç¤ºç›®æ ‡è·¯ç”±è¿æ¥

active-class é»˜è®¤å€¼: `"router-link-active"` æ¿€æ´»åä½¿ç”¨çš„classç±»å

**router-view**

æ¸²æŸ“è·¯å¾„åŒ¹é…åˆ°çš„è§†å›¾ç»„ä»¶

**router.push(...) ç¼–ç¨‹å¼å¯¼èˆª**

**è·¯ç”±**

é»˜è®¤çš„æ˜¯hashæ¨¡å¼ï¼Œä½¿ç”¨ URL çš„ hash æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„ URLï¼Œäºæ˜¯å½“ URL æ”¹å˜æ—¶ï¼Œé¡µé¢ä¸ä¼šé‡æ–°åŠ è½½ã€‚

å¦‚æœä¸æƒ³è¦å¾ˆä¸‘çš„ hashï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è·¯ç”±çš„ **history æ¨¡å¼**ï¼Œè¿™ç§æ¨¡å¼å……åˆ†åˆ©ç”¨ `history.pushState` API æ¥å®Œæˆ URL è·³è½¬è€Œæ— é¡»é‡æ–°åŠ è½½é¡µé¢ã€‚

```
import Vue from 'vue'
import Router from 'vue-router'
Vue.use(Router)  //Vueæ³¨å†ŒRouter
```

**è·¯ç”±ä½¿ç”¨**

```
import Recommend from '@/components/recommend/recommend'
import Rank from '@/components/rank/rank'
export default new Router({
  routes: [
    {
      path: '/',
      redirect: '/recommend'
    },
    {
      path: '/',
      name: 'Recommend',
      component: Recommend
    },
  ]
})
```

--------





## day2-æ¨èé¡µé¢å¼€å‘

**å…ˆä¸‹è½½jsonpåŒ…**

```
cnpm install jsonp -S
```

**ä½¿ç”¨Promise()å°è£…JSONP**

```
// å°è£…jsonp
import originJsonp from 'jsonp'
export default function JSONP(url, data, option) {
    url += (url.indexOf('?') === -1 ? '&' : '?') + param(data)
    return new Promise((resolve, reject) => {
        originJsonp(url, option,(err, data) => {
            if(!err) {
                resolve(data)
            }else{
                reject(err)
            }
        })
    }) 
}


// å¯¹{}æ•°æ®ç»è¡Œå°è£…
export function param(data) {
    let url =''
    for(var k in data) {
        let value = data[k] === void 0 ? '' : data[k]
        url += '&'+ k + '=' + encodeURIComponent(value)
    }
    return url ? url.substring(1) : ''
}
```



**ç»™elementå…ƒç´ å¢åŠ æŸä¸ªclass**

```
// dom.js
// åˆ¤æ–­æŸä¸ªelæ˜¯å¦å…·æœ‰className
export function hasClass(el, className){
    let reg = new RegExp('(^\\s)'+ className + '(\\s|$)')
    return reg.test(el.className)
}

export function addClass(el, className){
    if(hasClass(el,className))  return 
    let newClass = el.className.split(' ')
    newClass.push(className)
    el.className = newClass.join(' ')
}

```

**propså±æ€§**

```
props: {
      loop: {
        type: Boolean,
        default: true
      },
      autoPlay: {
        type: Boolean,
        default: true
      },
      interval: {
        type: Number,
        default: 4000
      }
    }
```

**æ ‡ç­¾ä¸Šçš„refå±æ€§**

æ–¹ä¾¿è·å–åˆ°æŸä¸ªå…ƒç´ çš„DOM

```
<div ref = 'slider'></div>
var vue = new Vue({
	// this.$refs.slider --> div DOMå…ƒç´ 
})
```

è½®æ’­å›¾å€Ÿç”¨ç¬¬ä¸‰æ–¹æ’ä»¶better-scroll

```
npm install better-scroll -S
```

ä½¿ç”¨æ–¹æ³•ğŸ‘‡

```vue
<template>
  <div class="slider" ref="slider">
    <div class="slider-group" ref="sliderGroup">
      <slot></slot>
    </div>
    <div class="dots"></div>
  </div>
</template>

// å®ç°æ— é™è½®æ’­çš„æ»šåŠ¨,ä»¥åŠå®Œæˆæ— çº¿è½®æ’­çš„æ•ˆæœ
this.slider = new BScroll(this.$refs.slider, {
        scrollX: true,
        scrollY: false,
        momentum: false,
        snap: true,
        snapLoop: this.loop, // è¡¨ç¤ºè½®æ’­
        snapThreshold: 0.3,
        snapSpeed: 400,
});
```

ä¸ºä»€ä¹ˆè½®æ’­å›¾å®ç°ä¸äº†æ— ç¼è½®æ’­ï¼Œ

è§£å†³çš„åŠæ³•å°±æ˜¯å‡ä½ç‰ˆæœ¬ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸çŸ¥é“ä¸ºä»€ä¹ˆä½¿ç”¨ä¸äº†

```
"better-scroll": "^0.1.15"
```

